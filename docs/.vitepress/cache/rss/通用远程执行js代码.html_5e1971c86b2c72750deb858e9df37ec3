<h1 id="github地址" tabindex="-1">github地址 <a class="header-anchor" href="#github地址" aria-label="Permalink to “github地址”">&#8203;</a></h1>
<div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre><!--::markdown-it-async::47yjae7qq7eachjbr9x95b::--><code>https://github.com/ice-a/remote_run_js_code</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h1 id="remote-javascript-code-runner" tabindex="-1">Remote JavaScript Code Runner <a class="header-anchor" href="#remote-javascript-code-runner" aria-label="Permalink to “Remote JavaScript Code Runner”">&#8203;</a></h1>
<p>这是一个用于远程执行JavaScript代码的后端服务。</p>
<h2 id="功能特点" tabindex="-1">功能特点 <a class="header-anchor" href="#功能特点" aria-label="Permalink to “功能特点”">&#8203;</a></h2>
<ul>
<li>远程执行JavaScript代码</li>
<li>安全的代码执行环境（使用vm2）</li>
<li>RESTful API接口</li>
<li>支持文件上传</li>
</ul>
<h2 id="安装步骤" tabindex="-1">安装步骤 <a class="header-anchor" href="#安装步骤" aria-label="Permalink to “安装步骤”">&#8203;</a></h2>
<ol>
<li>
<p>克隆项目：</p>
<div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre><!--::markdown-it-async::gzpklab3rzlxr1c4litmk::--><code>git clone [repository-url]
cd remote_run_js_code</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li>
<li>
<p>安装依赖：</p>
<div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre><!--::markdown-it-async::fwzigu833ywiaso29uzil::--><code>npm install</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li>
</ol>
<h2 id="使用方法" tabindex="-1">使用方法 <a class="header-anchor" href="#使用方法" aria-label="Permalink to “使用方法”">&#8203;</a></h2>
<h3 id="开发环境" tabindex="-1">开发环境 <a class="header-anchor" href="#开发环境" aria-label="Permalink to “开发环境”">&#8203;</a></h3>
<div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre><!--::markdown-it-async::ifjv5d3ut1j3binijtrnm::--><code>npm run dev</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="生产环境" tabindex="-1">生产环境 <a class="header-anchor" href="#生产环境" aria-label="Permalink to “生产环境”">&#8203;</a></h3>
<div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre><!--::markdown-it-async::z4fafyg1rvlx6n0r7a2pim::--><code>npm start</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="docker部署" tabindex="-1">Docker部署 <a class="header-anchor" href="#docker部署" aria-label="Permalink to “Docker部署”">&#8203;</a></h3>
<div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre><!--::markdown-it-async::prhl2ch9dbk58vvsll3no8::--><code>docker build -t remote-js-runner .
docker run -p 3000:3000 remote-js-runner</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="项目结构" tabindex="-1">项目结构 <a class="header-anchor" href="#项目结构" aria-label="Permalink to “项目结构”">&#8203;</a></h2>
<div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre><!--::markdown-it-async::jyzakqw4qvvhai209drod::--><code>├── server.js          # 主服务器文件
├── public/            # 静态文件
├── uploads/           # 上传文件目录
└── package.json       # 项目配置文件</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="依赖项" tabindex="-1">依赖项 <a class="header-anchor" href="#依赖项" aria-label="Permalink to “依赖项”">&#8203;</a></h2>
<ul>
<li>express: Web服务器框架</li>
<li>multer: 文件上传中间件</li>
<li>vm2: 安全的代码执行环境</li>
<li>nodemon: 开发环境自动重启（dev依赖）</li>
</ul>
<h2 id="api接口" tabindex="-1">API接口 <a class="header-anchor" href="#api接口" aria-label="Permalink to “API接口”">&#8203;</a></h2>
<h3 id="_1-上传文件执行" tabindex="-1">1. 上传文件执行 <a class="header-anchor" href="#_1-上传文件执行" aria-label="Permalink to “1. 上传文件执行”">&#8203;</a></h3>
<ul>
<li>端点：<code>POST /execute</code></li>
<li>参数：文件上传，字段名为<code>file</code></li>
<li>返回：<code>{&quot;result&quot;: 执行结果}</code> 或 <code>{&quot;error&quot;: &quot;错误信息&quot;}</code></li>
</ul>
<h3 id="_2-直接执行代码" tabindex="-1">2. 直接执行代码 <a class="header-anchor" href="#_2-直接执行代码" aria-label="Permalink to “2. 直接执行代码”">&#8203;</a></h3>
<ul>
<li>端点：<code>POST /execute-code</code></li>
<li>参数：JSON格式 <code>{&quot;code&quot;: &quot;JavaScript代码字符串&quot;}</code></li>
<li>返回：<code>{&quot;result&quot;: 执行结果}</code> 或 <code>{&quot;error&quot;: &quot;错误信息&quot;}</code></li>
</ul>
<h2 id="python调用示例" tabindex="-1">Python调用示例 <a class="header-anchor" href="#python调用示例" aria-label="Permalink to “Python调用示例”">&#8203;</a></h2>
<p>在<code>examples/python_client.py</code>中提供了完整的Python调用示例代码，包括：</p>
<ul>
<li>通过代码字符串执行JavaScript</li>
<li>通过文件上传执行JavaScript</li>
</ul>
<p>使用前请确保安装了requests库：</p>
<div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre><!--::markdown-it-async::dz3t8rytetnd5tikl5grc::--><code>pip install requests</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="执行结果" tabindex="-1">执行结果 <a class="header-anchor" href="#执行结果" aria-label="Permalink to “执行结果”">&#8203;</a></h3>
<p><img src="https://i-blog.csdnimg.cn/direct/de2ebc281b1e4c4e97d7faa52a418d72.png#pic_center" alt="执行结果" loading="lazy"></p>
<h2 id="测试代码示例" tabindex="-1">测试代码示例 <a class="header-anchor" href="#测试代码示例" aria-label="Permalink to “测试代码示例”">&#8203;</a></h2>
<p>以下是一个简单的测试代码示例：</p>
<div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre><!--::markdown-it-async::ap663t0munhti1yzhmtbi::--><code>// 筛选数组中的元素
function solution(arr) {
    let answer = []
    let min = 1;
    return answer = arr.filter((v) =&gt; v !== min);
}

solution([4,9,2,22])</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="执行结果-1" tabindex="-1">执行结果： <a class="header-anchor" href="#执行结果-1" aria-label="Permalink to “执行结果：”">&#8203;</a></h3>
<p><img src="https://i-blog.csdnimg.cn/direct/89d7695b8d19442b9a847ad0c5fa7efb.png#pic_center" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to “注意事项”">&#8203;</a></h2>
<ul>
<li>确保Node.js版本 &gt;= 18.0.0</li>
<li>生产环境部署时注意配置安全策略</li>
<li>建议设置代码执行超时限制</li>
</ul>
