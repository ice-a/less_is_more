<h1 id="使用opencv检测图片中是否有人物" tabindex="-1">使用opencv检测图片中是否有人物 <a class="header-anchor" href="#使用opencv检测图片中是否有人物" aria-label="Permalink to “使用opencv检测图片中是否有人物”">&#8203;</a></h1>
<div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><!--::markdown-it-async::autzpkz0t3jc900oeeia::--><code>#!/usr/bin/env python3  
# -*- coding: UTF-8 -*-  
&quot;&quot;&quot;  
@Author  ：木子  
@Date    ：2024/5/29 上午11:25 &quot;&quot;&quot;  
  
import os  
import shutil  
# 解决中文路径的问题  
import sys  
  
import cv2  
  
# 获取当前文件路径  
cur_path = os.path.abspath(__file__)  
# 获取当前文件的父目录  
father_path = os.path.abspath(os.path.dirname(cur_path) + os.path.sep + &quot;.&quot;)  
# 将父目录添加到系统路径中  
sys.path.append(father_path)  
  
  
# 使用opencv检测图片中是否有人物  
def detect_person(image_path):  
    # 读取图片  
    img = cv2.imread(image_path)  
    if img is None:  
        print(f&quot;Error: Unable to load image at {image_path}&quot;)  
        return  # 或者适当的错误处理  
    # 转换为灰度图  
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)  
    # 加载人脸检测器  
    face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + &#039;haarcascade_frontalface_default.xml&#039;)  
    # 检测人脸  
    # faces = face_cascade.detectMultiScale(gray, 1.3, 5)  
    faces = face_cascade.detectMultiScale(gray, scaleFactor=1.1, minNeighbors=5)  
    # 如果检测到人脸，则返回True，否则返回False  
    if len(faces) &gt; 0:  
        return True  
    else:  
        return False  
  
  
# 测试  
if __name__ == &#039;__main__&#039;:  
    _dir = r&quot;F:\upload\others\ios\img\chat&quot;  
    pho = r&quot;F:\upload\others\ios\img\photo&quot;  
    for item in os.listdir(_dir):  
        t = os.path.join(_dir, item)  
        if detect_person(t):  
            _dst = os.path.join(pho, item)  
            shutil.move(t, _dst)  
            print(f&quot;{item} 已移动到 {_dst}&quot;)  
        else:  
            print(f&quot;{item} 无人脸&quot;)</code></pre>
<div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div>